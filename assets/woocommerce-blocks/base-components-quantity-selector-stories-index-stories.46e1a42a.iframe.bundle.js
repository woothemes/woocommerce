(self.webpackChunk_woocommerce_block_library=self.webpackChunk_woocommerce_block_library||[]).push([[2074],{"./assets/js/base/components/quantity-selector/stories/index.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,Disabled:()=>Disabled,__namedExportsOrder:()=>__namedExportsOrder,default:()=>index_stories});var react=__webpack_require__("../../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js"),external_STORYBOOK_MODULE_CLIENT_API_=__webpack_require__("@storybook/client-api"),build_module=__webpack_require__("../../node_modules/.pnpm/@wordpress+i18n@4.45.0/node_modules/@wordpress/i18n/build-module/index.js"),a11y_build_module=__webpack_require__("../../node_modules/.pnpm/@wordpress+a11y@4.0.1/node_modules/@wordpress/a11y/build-module/index.js"),clsx=__webpack_require__("../../node_modules/.pnpm/clsx@2.1.1/node_modules/clsx/dist/clsx.mjs"),i18n_build_module=__webpack_require__("../../node_modules/.pnpm/@wordpress+i18n@5.0.1/node_modules/@wordpress/i18n/build-module/index.js");function isAppleOS(_window=null){if(!_window){if("undefined"==typeof window)return!1;_window=window}const{platform}=_window.navigator;return-1!==platform.indexOf("Mac")||["iPad","iPhone"].includes(platform)}const ALT="alt",CTRL="ctrl",COMMAND="meta",SHIFT="shift";function capitaliseFirstCharacter(string){return string.length<2?string.toUpperCase():string.charAt(0).toUpperCase()+string.slice(1)}function mapValues(object,mapFn){return Object.fromEntries(Object.entries(object).map((([key,value])=>[key,mapFn(value)])))}const modifiers={primary:_isApple=>_isApple()?[COMMAND]:[CTRL],primaryShift:_isApple=>_isApple()?[SHIFT,COMMAND]:[CTRL,SHIFT],primaryAlt:_isApple=>_isApple()?[ALT,COMMAND]:[CTRL,ALT],secondary:_isApple=>_isApple()?[SHIFT,ALT,COMMAND]:[CTRL,SHIFT,ALT],access:_isApple=>_isApple()?[CTRL,ALT]:[SHIFT,ALT],ctrl:()=>[CTRL],alt:()=>[ALT],ctrlShift:()=>[CTRL,SHIFT],shift:()=>[SHIFT],shiftAlt:()=>[SHIFT,ALT],undefined:()=>[]},displayShortcutList=(mapValues(modifiers,(modifier=>(character,_isApple=isAppleOS)=>[...modifier(_isApple),character.toLowerCase()].join("+"))),mapValues(modifiers,(modifier=>(character,_isApple=isAppleOS)=>{const isApple=_isApple(),replacementKeyMap={[ALT]:isApple?"⌥":"Alt",[CTRL]:isApple?"⌃":"Ctrl",[COMMAND]:"⌘",[SHIFT]:isApple?"⇧":"Shift"};return[...modifier(_isApple).reduce(((accumulator,key)=>{var _replacementKeyMap$ke;const replacementKey=null!==(_replacementKeyMap$ke=replacementKeyMap[key])&&void 0!==_replacementKeyMap$ke?_replacementKeyMap$ke:key;return isApple?[...accumulator,replacementKey]:[...accumulator,replacementKey,"+"]}),[]),capitaliseFirstCharacter(character)]})));mapValues(displayShortcutList,(shortcutList=>(character,_isApple=isAppleOS)=>shortcutList(character,_isApple).join(""))),mapValues(modifiers,(modifier=>(character,_isApple=isAppleOS)=>{const isApple=_isApple(),replacementKeyMap={[SHIFT]:"Shift",[COMMAND]:isApple?"Command":"Control",[CTRL]:"Control",[ALT]:isApple?"Option":"Alt",",":(0,i18n_build_module.__)("Comma"),".":(0,i18n_build_module.__)("Period"),"`":(0,i18n_build_module.__)("Backtick"),"~":(0,i18n_build_module.__)("Tilde")};return[...modifier(_isApple),character].map((key=>{var _replacementKeyMap$ke2;return capitaliseFirstCharacter(null!==(_replacementKeyMap$ke2=replacementKeyMap[key])&&void 0!==_replacementKeyMap$ke2?_replacementKeyMap$ke2:key)})).join(isApple?" ":" + ")}));mapValues(modifiers,(getModifiers=>(event,character,_isApple=isAppleOS)=>{const mods=getModifiers(_isApple),eventMods=function getEventModifiers(event){return[ALT,CTRL,COMMAND,SHIFT].filter((key=>event[`${key}Key`]))}(event),replacementWithShiftKeyMap={Comma:",",Backslash:"\\",IntlRo:"\\",IntlYen:"\\"},modsDiff=mods.filter((mod=>!eventMods.includes(mod))),eventModsDiff=eventMods.filter((mod=>!mods.includes(mod)));if(modsDiff.length>0||eventModsDiff.length>0)return!1;let key=event.key.toLowerCase();return character?(event.altKey&&1===character.length&&(key=String.fromCharCode(event.keyCode).toLowerCase()),event.shiftKey&&1===character.length&&replacementWithShiftKeyMap[event.code]&&(key=replacementWithShiftKeyMap[event.code]),"del"===character&&(character="delete"),key===character.toLowerCase()):mods.includes(key)}));var index_module=__webpack_require__("../../node_modules/.pnpm/use-debounce@9.0.4_react@18.3.1/node_modules/use-debounce/dist/index.module.js"),jsx_runtime=(__webpack_require__("./assets/js/base/components/quantity-selector/style.scss"),__webpack_require__("../../node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-runtime.js"));const QuantitySelector=({className,quantity=1,minimum=1,maximum,onChange=()=>{},step=1,itemName="",disabled,editable})=>{const classes=(0,clsx.A)("wc-block-components-quantity-selector",className),inputRef=(0,react.useRef)(null),decreaseButtonRef=(0,react.useRef)(null),increaseButtonRef=(0,react.useRef)(null),hasMaximum=void 0!==maximum,canDecrease=!disabled&&quantity-step>=minimum,canIncrease=!disabled&&(!hasMaximum||quantity+step<=maximum),normalizeQuantity=(0,react.useCallback)((initialValue=>{let value=initialValue;hasMaximum&&(value=Math.min(value,Math.floor(maximum/step)*step)),value=Math.max(value,Math.ceil(minimum/step)*step),value=Math.floor(value/step)*step,value!==initialValue&&onChange(value)}),[hasMaximum,maximum,minimum,onChange,step]),debouncedNormalizeQuantity=(0,index_module.YQ)(normalizeQuantity,300);(0,react.useLayoutEffect)((()=>{normalizeQuantity(quantity)}),[quantity,normalizeQuantity]);const quantityInputOnKeyDown=(0,react.useCallback)((event=>{const isArrowDown=void 0!==typeof event.key?"ArrowDown"===event.key:40===event.keyCode,isArrowUp=void 0!==typeof event.key?"ArrowUp"===event.key:38===event.keyCode;isArrowDown&&canDecrease&&(event.preventDefault(),onChange(quantity-step)),isArrowUp&&canIncrease&&(event.preventDefault(),onChange(quantity+step))}),[quantity,onChange,canIncrease,canDecrease,step]);return(0,jsx_runtime.jsxs)("div",{className:classes,children:[(0,jsx_runtime.jsx)("input",{ref:inputRef,className:"wc-block-components-quantity-selector__input",disabled,readOnly:!editable,type:"number",step,min:minimum,max:maximum,value:quantity,onKeyDown:quantityInputOnKeyDown,onChange:event=>{let value=parseInt(event.target.value,10);value=isNaN(value)?quantity:value,value!==quantity&&(onChange(value),debouncedNormalizeQuantity(value))},"aria-label":(0,build_module.sprintf)((0,build_module.__)("Quantity of %s in your cart.","woocommerce"),itemName)}),editable&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("button",{ref:decreaseButtonRef,"aria-label":(0,build_module.sprintf)((0,build_module.__)("Reduce quantity of %s","woocommerce"),itemName),className:"wc-block-components-quantity-selector__button wc-block-components-quantity-selector__button--minus",disabled:!canDecrease,onClick:()=>{const newQuantity=quantity-step;onChange(newQuantity),(0,a11y_build_module.L)((0,build_module.sprintf)((0,build_module.__)("Quantity reduced to %s.","woocommerce"),newQuantity)),normalizeQuantity(newQuantity)},children:"－"}),(0,jsx_runtime.jsx)("button",{ref:increaseButtonRef,"aria-label":(0,build_module.sprintf)((0,build_module.__)("Increase quantity of %s","woocommerce"),itemName),disabled:!canIncrease,className:"wc-block-components-quantity-selector__button wc-block-components-quantity-selector__button--plus",onClick:()=>{const newQuantity=quantity+step;onChange(newQuantity),(0,a11y_build_module.L)((0,build_module.sprintf)((0,build_module.__)("Quantity increased to %s.","woocommerce"),newQuantity)),normalizeQuantity(newQuantity)},children:"＋"})]})]})};QuantitySelector.displayName="QuantitySelector",QuantitySelector.__docgenInfo={description:"",methods:[],displayName:"QuantitySelector",props:{quantity:{defaultValue:{value:"1",computed:!1},required:!1,tsType:{name:"number"},description:"Current quantity"},minimum:{defaultValue:{value:"1",computed:!1},required:!1,tsType:{name:"number"},description:"Minimum quantity"},onChange:{defaultValue:{value:"() => void 0",computed:!1},required:!1,tsType:{name:"signature",type:"function",raw:"( newQuantity: number ) => void",signature:{arguments:[{name:"newQuantity",type:{name:"number"}}],return:{name:"void"}}},description:"Event handler triggered when the quantity is changed"},step:{defaultValue:{value:"1",computed:!1},required:!1,tsType:{name:"number"},description:"Input step attribute."},itemName:{defaultValue:{value:"''",computed:!1},required:!1,tsType:{name:"string"},description:"Name of the item the quantity selector refers to\n\nUsed for a11y purposes"},className:{required:!1,tsType:{name:"string"},description:"Component wrapper classname\n\n@default 'wc-block-components-quantity-selector'"},maximum:{required:!0,tsType:{name:"number"},description:"Maximum quantity"},disabled:{required:!0,tsType:{name:"boolean"},description:"Whether the component should be interactable"},editable:{required:!0,tsType:{name:"boolean"},description:"Whether the component should be editable"}}};const quantity_selector=QuantitySelector;QuantitySelector.__docgenInfo={description:"",methods:[],displayName:"QuantitySelector",props:{className:{required:!1,tsType:{name:"string"},description:"Component wrapper classname\n\n@default 'wc-block-components-quantity-selector'"},quantity:{required:!1,tsType:{name:"number"},description:"Current quantity",defaultValue:{value:"1",computed:!1}},minimum:{required:!1,tsType:{name:"number"},description:"Minimum quantity",defaultValue:{value:"1",computed:!1}},maximum:{required:!0,tsType:{name:"number"},description:"Maximum quantity"},step:{required:!1,tsType:{name:"number"},description:"Input step attribute.",defaultValue:{value:"1",computed:!1}},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"( newQuantity: number ) => void",signature:{arguments:[{type:{name:"number"},name:"newQuantity"}],return:{name:"void"}}},description:"Event handler triggered when the quantity is changed",defaultValue:{value:"() => void 0",computed:!1}},itemName:{required:!1,tsType:{name:"string"},description:"Name of the item the quantity selector refers to\n\nUsed for a11y purposes",defaultValue:{value:"''",computed:!1}},disabled:{required:!0,tsType:{name:"boolean"},description:"Whether the component should be interactable"},editable:{required:!0,tsType:{name:"boolean"},description:"Whether the component should be editable"}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["assets/js/base/components/quantity-selector/index.tsx"]={name:"QuantitySelector",docgenInfo:QuantitySelector.__docgenInfo,path:"assets/js/base/components/quantity-selector/index.tsx"});const index_stories={title:"Base Components/QuantitySelector",component:quantity_selector,args:{itemName:"widgets",quantity:1}},Template=args=>{const[{},setArgs]=(0,external_STORYBOOK_MODULE_CLIENT_API_.useArgs)();return(0,jsx_runtime.jsx)(quantity_selector,{...args,onChange:newVal=>{args.onChange?.(newVal),setArgs({quantity:newVal})}})};Template.displayName="Template";const Default=Template.bind({});Default.args={};const Disabled=Template.bind({});Disabled.args={disabled:!0},Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"args => {\n  const [{}, setArgs] = useArgs();\n  const onChange = (newVal: number) => {\n    args.onChange?.(newVal);\n    setArgs({\n      quantity: newVal\n    });\n  };\n  return <QuantitySelector {...args} onChange={onChange} />;\n}",...Default.parameters?.docs?.source}}},Disabled.parameters={...Disabled.parameters,docs:{...Disabled.parameters?.docs,source:{originalSource:"args => {\n  const [{}, setArgs] = useArgs();\n  const onChange = (newVal: number) => {\n    args.onChange?.(newVal);\n    setArgs({\n      quantity: newVal\n    });\n  };\n  return <QuantitySelector {...args} onChange={onChange} />;\n}",...Disabled.parameters?.docs?.source}}};const __namedExportsOrder=["Default","Disabled"]},"../../node_modules/.pnpm/@wordpress+hooks@4.0.1/node_modules/@wordpress/hooks/build-module/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{W5:()=>applyFilters,se:()=>defaultHooks,Eo:()=>doAction});const build_module_validateNamespace=function validateNamespace(namespace){return"string"!=typeof namespace||""===namespace?(console.error("The namespace must be a non-empty string."),!1):!!/^[a-zA-Z][a-zA-Z0-9_.\-\/]*$/.test(namespace)||(console.error("The namespace can only contain numbers, letters, dashes, periods, underscores and slashes."),!1)};const build_module_validateHookName=function validateHookName(hookName){return"string"!=typeof hookName||""===hookName?(console.error("The hook name must be a non-empty string."),!1):/^__/.test(hookName)?(console.error("The hook name cannot begin with `__`."),!1):!!/^[a-zA-Z][a-zA-Z0-9_.-]*$/.test(hookName)||(console.error("The hook name can only contain numbers, letters, dashes, periods and underscores."),!1)};const build_module_createAddHook=function createAddHook(hooks,storeKey){return function addHook(hookName,namespace,callback,priority=10){const hooksStore=hooks[storeKey];if(!build_module_validateHookName(hookName))return;if(!build_module_validateNamespace(namespace))return;if("function"!=typeof callback)return void console.error("The hook callback must be a function.");if("number"!=typeof priority)return void console.error("If specified, the hook priority must be a number.");const handler={callback,priority,namespace};if(hooksStore[hookName]){const handlers=hooksStore[hookName].handlers;let i;for(i=handlers.length;i>0&&!(priority>=handlers[i-1].priority);i--);i===handlers.length?handlers[i]=handler:handlers.splice(i,0,handler),hooksStore.__current.forEach((hookInfo=>{hookInfo.name===hookName&&hookInfo.currentIndex>=i&&hookInfo.currentIndex++}))}else hooksStore[hookName]={handlers:[handler],runs:0};"hookAdded"!==hookName&&hooks.doAction("hookAdded",hookName,namespace,callback,priority)}};const build_module_createRemoveHook=function createRemoveHook(hooks,storeKey,removeAll=!1){return function removeHook(hookName,namespace){const hooksStore=hooks[storeKey];if(!build_module_validateHookName(hookName))return;if(!removeAll&&!build_module_validateNamespace(namespace))return;if(!hooksStore[hookName])return 0;let handlersRemoved=0;if(removeAll)handlersRemoved=hooksStore[hookName].handlers.length,hooksStore[hookName]={runs:hooksStore[hookName].runs,handlers:[]};else{const handlers=hooksStore[hookName].handlers;for(let i=handlers.length-1;i>=0;i--)handlers[i].namespace===namespace&&(handlers.splice(i,1),handlersRemoved++,hooksStore.__current.forEach((hookInfo=>{hookInfo.name===hookName&&hookInfo.currentIndex>=i&&hookInfo.currentIndex--})))}return"hookRemoved"!==hookName&&hooks.doAction("hookRemoved",hookName,namespace),handlersRemoved}};const build_module_createHasHook=function createHasHook(hooks,storeKey){return function hasHook(hookName,namespace){const hooksStore=hooks[storeKey];return void 0!==namespace?hookName in hooksStore&&hooksStore[hookName].handlers.some((hook=>hook.namespace===namespace)):hookName in hooksStore}};const build_module_createRunHook=function createRunHook(hooks,storeKey,returnFirstArg=!1){return function runHooks(hookName,...args){const hooksStore=hooks[storeKey];hooksStore[hookName]||(hooksStore[hookName]={handlers:[],runs:0}),hooksStore[hookName].runs++;const handlers=hooksStore[hookName].handlers;if(!handlers||!handlers.length)return returnFirstArg?args[0]:void 0;const hookInfo={name:hookName,currentIndex:0};for(hooksStore.__current.push(hookInfo);hookInfo.currentIndex<handlers.length;){const result=handlers[hookInfo.currentIndex].callback.apply(null,args);returnFirstArg&&(args[0]=result),hookInfo.currentIndex++}return hooksStore.__current.pop(),returnFirstArg?args[0]:void 0}};const build_module_createCurrentHook=function createCurrentHook(hooks,storeKey){return function currentHook(){var _hooksStore$__current;const hooksStore=hooks[storeKey];return null!==(_hooksStore$__current=hooksStore.__current[hooksStore.__current.length-1]?.name)&&void 0!==_hooksStore$__current?_hooksStore$__current:null}};const build_module_createDoingHook=function createDoingHook(hooks,storeKey){return function doingHook(hookName){const hooksStore=hooks[storeKey];return void 0===hookName?void 0!==hooksStore.__current[0]:!!hooksStore.__current[0]&&hookName===hooksStore.__current[0].name}};const build_module_createDidHook=function createDidHook(hooks,storeKey){return function didHook(hookName){const hooksStore=hooks[storeKey];if(build_module_validateHookName(hookName))return hooksStore[hookName]&&hooksStore[hookName].runs?hooksStore[hookName].runs:0}};class _Hooks{constructor(){this.actions=Object.create(null),this.actions.__current=[],this.filters=Object.create(null),this.filters.__current=[],this.addAction=build_module_createAddHook(this,"actions"),this.addFilter=build_module_createAddHook(this,"filters"),this.removeAction=build_module_createRemoveHook(this,"actions"),this.removeFilter=build_module_createRemoveHook(this,"filters"),this.hasAction=build_module_createHasHook(this,"actions"),this.hasFilter=build_module_createHasHook(this,"filters"),this.removeAllActions=build_module_createRemoveHook(this,"actions",!0),this.removeAllFilters=build_module_createRemoveHook(this,"filters",!0),this.doAction=build_module_createRunHook(this,"actions"),this.applyFilters=build_module_createRunHook(this,"filters",!0),this.currentAction=build_module_createCurrentHook(this,"actions"),this.currentFilter=build_module_createCurrentHook(this,"filters"),this.doingAction=build_module_createDoingHook(this,"actions"),this.doingFilter=build_module_createDoingHook(this,"filters"),this.didAction=build_module_createDidHook(this,"actions"),this.didFilter=build_module_createDidHook(this,"filters")}}const defaultHooks=function createHooks(){return new _Hooks}(),{addAction,addFilter,removeAction,removeFilter,hasAction,hasFilter,removeAllActions,removeAllFilters,doAction,applyFilters,currentAction,currentFilter,doingAction,doingFilter,didAction,didFilter,actions,filters}=defaultHooks},"../../node_modules/.pnpm/clsx@2.1.1/node_modules/clsx/dist/clsx.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function r(e){var t,f,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=" "),n+=f)}else for(f in e)e[f]&&(n&&(n+=" "),n+=f);return n}__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=function clsx(){for(var e,t,f=0,n="",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=" "),n+=t);return n}},"./assets/js/base/components/quantity-selector/style.scss":()=>{},"../../node_modules/.pnpm/use-debounce@9.0.4_react@18.3.1/node_modules/use-debounce/dist/index.module.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{YQ:()=>c});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js");function c(u,e,c){var i=this,a=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),o=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(0),f=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),l=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)([]),m=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(),v=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(),d=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(u),p=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(!0);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){d.current=u}),[u]);var g=!e&&0!==e&&"undefined"!=typeof window;if("function"!=typeof u)throw new TypeError("Expected a function");e=+e||0;var w=!!(c=c||{}).leading,s=!("trailing"in c)||!!c.trailing,x="maxWait"in c,y=x?Math.max(+c.maxWait||0,e):null;(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){return p.current=!0,function(){p.current=!1}}),[]);var h=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){var r=function(r){var n=l.current,t=m.current;return l.current=m.current=null,o.current=r,v.current=d.current.apply(t,n)},n=function(r,n){g&&cancelAnimationFrame(f.current),f.current=g?requestAnimationFrame(r):setTimeout(r,n)},t=function(r){if(!p.current)return!1;var n=r-a.current;return!a.current||n>=e||n<0||x&&r-o.current>=y},u=function(n){return f.current=null,s&&l.current?r(n):(l.current=m.current=null,v.current)},c=function r(){var c=Date.now();if(t(c))return u(c);if(p.current){var i=e-(c-a.current),f=x?Math.min(i,y-(c-o.current)):i;n(r,f)}},h=function(){var u=Date.now(),d=t(u);if(l.current=[].slice.call(arguments),m.current=i,a.current=u,d){if(!f.current&&p.current)return o.current=a.current,n(c,e),w?r(a.current):v.current;if(x)return n(c,e),r(a.current)}return f.current||n(c,e),v.current};return h.cancel=function(){f.current&&(g?cancelAnimationFrame(f.current):clearTimeout(f.current)),o.current=0,l.current=a.current=m.current=f.current=null},h.isPending=function(){return!!f.current},h.flush=function(){return f.current?u(Date.now()):v.current},h}),[w,x,e,y,s,g]);return h}}}]);